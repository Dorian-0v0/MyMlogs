## MySQL 的事务隔离级别从低到高

| 隔离级别 | 描述                                                         | 可能发生的问题         |
| -------- | ------------------------------------------------------------ | ---------------------- |
| 读未提交 | 读取未提交的事务数据，允许脏读                               | 脏读、不可重复读、幻读 |
| 读已提交 | 只读取已提交的事务数据，避免脏读                             | 不可重复读、幻读       |
| 可重复读 | 避免了不可重复读，在事务期间多次读取同一数据结果一致（MySQL默认） | 幻读（通过锁实现避免） |
| 串行化   | 最高级别，完全串行化事务操作，避免所有并发问题               | 性能最低，可能引起死锁 |

## 数据库并发安全问题

**脏读**：一个事务读取了另一个事务修改过的数据，但另一个事务未提交的

**不可重复读：**同一事务内，多次读取同一数据返回不同结果（数据被其他事务修改）

**幻读**：同一事务内，多次执行相同查询返回不同行集（其他事务新增或删除行）

#### **解决的并发安全问题**

## SQL优化

首先分析慢查询，要在分析的sql语句前加explain，之后就会返回一个表来显示执行时的一些问题

### 常见的优化策略

1. 多次插入数据库的操作改为批量插入数据库，因为多次插入每一次都会涉及到网络的连接
2. 手动事务提交，mysql默认是每次执行语句自己提交事务，这样操作事务就非常频繁，性能就会下降。
3. 主键优化，主键不要太长，要是，同时新插入数据保证主键自增。
4. 排序优化，排序字段尽量加索引
5. 尽量使用聚簇索引，避免出现回表查询的情况。
6. 使用join代替子查询